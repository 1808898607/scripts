const $ = new Env("合肥旗舰店开业");
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
const notify = $.isNode() ? require('./sendNotify') : '';
const cp = $.isNode() ? require('child_process') : '';
let cookiesArr = [], cookie = '', message = '';
let shareCode = [];
 var _0xodX='jsjiami.com.v6',_0x1f9c=[_0xodX,'w6jCl0LDsFA=','ecKqwpjDvVM=','5Lqx5LiZ6L2a5Zi95Lqc56qj5peI5o6J','JMKMwrY1wok/wrsyw5F5wqfDrDBqUBt1w6xCwqbDjAdSBsKaJ8O7w4zCrEo6e8K6wp4Jw7I7BsK9wpdZSWHDhsK7NV1MwpAhw7Qwwoo9','IcKdw68kwopswrp3w5gyw6nDoi0=','OybCm0HDnMKXBMOSwrHDjTheIsKhYMOYYcOFwq7CsMOgw6l0Dkonw4ZhZMKbwqzCpR5yQMOWHHrDkMOvwojCpHxgViLCoMOfwpfDnAjCpgEwPzU7fTkuw6I1XsKtJcOXMUoNGRpNwpkCw7HDul1UJzRCwq3CnsOiw4Zlw6NqaWjDuXkaw5w8LMOwcQUvw4HDjg5fI1nCrmXDlMKZX8ONw4p4QcOKwppqOMKHwojCuik4wpN5CWXDh8Kiw7FLe8OKYcOswok=','w4zDlcORG8O2','wo0tw4TDhRY=','XGbDiw==','wrrCgHTCkGnDisKaDkvCsA==','w4BZSy3Cvw==','OygKwrNR','w5jDosKZIVQ=','6YCJ6KaP5L6R5puQ5LqE56S556ax5rKn','YsORwrQ=','wqfCgXd8wr7CoA==','PgbCtHDDlw==','H8Ogw7A=','QsKHwqfDog==','aHotIV4=','w6/ChMOZw7py','wrYwI3TDgw==','PMKZwrA2wp8=','w5zCpHPDtm0AMw==','w7rDniAI','KAbChMKMw44=','PCvChcKcw6vCkFs=','w5xHwp3DiA==','wqImUztFCsKzRQEYAMKxw6wQ','DMKGC8KH','wrFNwoHCgsOvwrXCrV4=','wqZfwpfClcOvwrXCrV4=','wp/Cu8KbcV4x','XMOXw4fCtcOh','f8OEwprCq8KN','QcKZAA==','NcOAw7sawoo=','wr3Cn8KvVkQ=','wqrCisKEwqbDmQ==','w7bCgsKdwrE=','wrhFw7LCoEvDkw==','R8KDwrPDtA==','KyDChw==','w77DlMOfQMKAJyLCtg==','wrxUwqA=','wpvCoU7CpAHDqcKjIA==','w7rClXnDg3c=','acObwqc=','wqNbwpDClMOHwq/Cqg==','w4UCwpw=','EcO8w7jCsRcq','wrnCi2Zcwr7CocOE','aSXCtk0=','wpMgw73Dth7CnQA=','wo9IwpcPwpMaw5E0Eg==','wq0iVBBTEMKC','G8OywrshGMOILMOJ','w4DCu8O2w7xlcQ==','SsKHwqbDtFw=','5LiH6LK36aG+5a235Lqu','Hh7Cp8Kow7A=','FsOxw7XCuxh3wpQtOcOpVRrCn8KsIBV4wowoQWdgwr0xw7XDmsOhwoFUw6hvbVcDFcKU','IngTw6EOLsOgbDDCq8KiwrLDucOdwqXCsXfDlcOBOsO5w5oGND5LwpTCp8O8MUA7w404wpDDqg==','wrUEw53CqkrCgcOPwqHCt0HDqMORwqEDwr18fMOaw7rCmFwRZsO3wpIxKsO+wrhRLcKBfsKbUsOG','wod4w4XDkGwLNkDCmMOKw4bDiwnCpX7CkmDDoMOxbRBGMsKhdMKMwrQ4GcK8w5XDpCdWwqES','PyfCsFHDiA==','5YaI5rOF5buo6ZOq','6I+X5Y2Q5Yin5YuT56O6','w6rCm2TDoHo=','wqY1w4PDuwg=','OcODw6MPwpc=','bcOiw6XCr8OEA0PCrw==','w6NrTQLChw==','w7rDo8OvaMKs','w57CmnDDhFA=','w4HCt8Ouw4plYjI=','wq0wQSNo','wpvCvkZuwrg=','wrbCu8KV','Q8KXChA=','QUocBE8=','aBnCgkF+','bEzDicKHWA==','LMOywonCmA==','wowOAXTDlCIS','w5jDv8On','KMOowqci','wpAkw73Dsw==','wqpSwrc2UXY4','w7vDmsOIwrXCs0huw6LCkVJSSsOWw7QDfcOewo7DiVkxwrbDmiNLMMOjwqLDmcOhwosDwooew5M7','W8KPNRwh','E8O2wqDCuUcuw4otOcOiVR3Ck8KsIEB8woMoGTY1w6gxw7XCjsOgwogCwrw+NlxQR8KU','SsKzwqXDqX0=','w5vChMKLwpM=','wq5OwoDCqMOL','wrfCrcKcwpUCwqs=','w5RqPS3CnxrCpcOE','wqbCj2RawqQ=','wpIHFGXDmQ==','wqLCgHRcwrQ=','GCDCgkPDvsKaCMKY','wp/Cu8Kb','w5MQw7xuHhV25b655aWm44Kl5LmF5Lqk6LSn5Y6w','w6TDrcKSFEk=','FDNCwqJxK8K5bQ==','Q0J7T8OxwplsJBvCng==','ET7CgH/Dqg==','KMKKwqgUwpE=','cHbDqQ==','dzHCqEA=','44Kh5o6R56eL44OyaQZsSMOcw4zltZXlp4rmlbc=','5Lig5Li16LSA5Y6i','RcKIwq7DokE=','eMKFAgc/N8OROg==','EcOPw4kswrk=','wr7Cp8K0woQa','wrfDkcO7XsKuSMOlcC4G','wqfDm8O6UcKJQuW1o+WkqOaUgF8zw5Q=','woRFw5nCvWHDl8KTwqU=','deitiemGl+aUveebkuW+suiNseWMtCXCjcK1wprCn8O4','wqhIwpYB','Z8ORwqHCrg==','wrVVwrE=','wosmWSFm','HsOmFsOjw70=','wqPCh33Dn2Iywohtw5/DhkjDrMKzfgwyZEU=','wr3Cs8KW','wq7CnsKzwrLDuQ==','eyLChHVY','axLCsnxQ','WVU2AQ==','w47jgqTkuLnkuKbot4blj5A=','w4LCn8Kcwp5Q','DcO8R1VRdsKcf8Ku4paMfeiMl+W8jsOa','bsOjw6DCkg==','SeS7hOiwl+OBpw==','w5TCncOzw7p5','w4PCmsKvwrZg','K8KqwpMhwpc=','PcKUGsKUMChEw5M=','wrxXw4jCrEc=','wp02w4XDvRjCgA8=','w4XCmMKbwpBmwql7KA==','wr1Zw5s=','RMKYAxAJ','CyDClUjCo8ONEyQ=','w77CgsKdwolmwql7KA==','w5gywr3CjG0AbQ==','w4PCsmA=','w4YCwoEz','44C55o2h56e944Ckwq48w5M1bmXltYflp6bmlow=','wrLCocKZwqHDsA==','w70QwokkYMKbGmM=','w5HorLjphLDmlbTnm7PlvqXoj4TljabDgFdTwrHDjxfCom7Dt8KXwrjCn1nDmsOowoLDp8K5WFpXYsOEw4TDpAAVwrfDncKTdMOww4nDh8Kiw4A5w6zCpn4QKhBJ','w7zDisKxFXM=','Jz3Cv8KQw6DCkQ==','wrkiThB8C8KXXggR','w43CrmjDvmsB5bak5aWN5pa0flw2','5Lui5LmS6LeX5YyI','w53DvsOkYcK9','HcOgwpjCi300eG4=','w7rorIPphbzmlrTnmbHlvqjoj5fljL3CiyrCk1bDm8Kv','DcOxM8O/w5A=','wqPChUd0woQ=','w6zDksKeAXg=','wq12wpAUwrM=','JuODtuS5puS6m+i0n+WNvg==','HyfChU3DiA==','KsONP8O/w6fChsKrwoc=','w5DDvsKRJCrDnUDDi8OI4pWRw5zojorlvKXDqg==','wrjkuY/osrbjg5Y=','IiHClg==','w5vDucOETcKT','Vhs5BMKpw5YPagw=','Fih0wpF1','w6snwr7CqUA=','wr7jgoDkuKzkuJjot6PljpI=','wrXCocKRwpk4wqJKDw==','MDrCk1HCo8ONEyQ=','OsO4wrUk','ReS7peiysOOAoQ==','wrDCqsKEwrc=','wpErw78=','IywOIcKew7ETSQ==','L8OkwpzCrmk=','BcOow7g=','w6zClsOFw4xFQQnCtg==','w6/DjcKaGnQ=','cWrDqQ==','wpMDDmHDhQM=','wqLCuMKCwp8J','w4UCwpg1Rg==','LCFTwrNX','w6zDoMOkPsOpfSc=','wqpXwofCm8OowrrCplQ=','w7VMSizCm0Fc5b2j5aer44KH5LiF5LmZ6Leo5Y2L','wp7CnXVLwoLCs8OMcw==','c2TDo8KG','44CV5o2k56e644ORwoHCpxpDWMKh5baB5aaQ5paX','5Lm35LuT6Leb5Yyz','wrLCpsKWwpcO','w6HDo8OldsKLBBrClA==','w4XDmcOHYMKH','w6hqFjDCtR4=','RMKNwp3DinE=','woHCtcKYwrzDhg==','wr5fwqIgVUs9','wrcqw6bDuRbCjBLDt2o=','WcOQwrVGwqg=','A8Opw6EjwpJ1','GsKCCcKDDDpM','wrzCqsKJwqDDqcKEEg==','JibCmUjChMOJNAXCtQ==','w4zClMKMwp9Jwrx3','wpLCin7Ciy3DjsK8Iw==','d8ORwrbCpcKQwrsQ','w5sGwoIyYMKVA28Xwro=','5Lm15Lim6Lew5Y6z','DCfCkkbClQ==','w7PCocO/w7pOYjHClA==','wpborIPph5jmlIDnmanlvK7ojZvljobCjcKZF8K3w6kt','w5MkwpDCjU4GbUY=','w6vCuF3DgUM=','6aGN5Yy45Lq86LG/','W8Ojw6/CtcOC','w7njg4TkuZDkuKjotIrljrQ=','w4fCr2PDsHo=','wq5eGmLDlsOLamk=','VkPDgQjCkMObRcOdwqTil7co6I+J5b6dw6g=','AsOjw68m','wpjkuorosq/jgqs=','JMO8wpo=','5rSw5YmO5Yq55Yqi56ON5Yui5p6N5Zym5rGV','FTzChUs=','wqBfwpDCkQ==','O8O7wpzCi1YccQ==','w4fCnsOUw51u','wqXDuMObb8KO','w53Do8OOa8KhAA==','w7LDoMOBH8OW','SGjDo8KSWA==','OMO5w6XClwk=','ICfCksKUw4rClVPDlg==','ecO1w6TCjsOlDFfCpQ==','IsKRwqEuwpRkw7l4','wpk2w64=','Bwk8AA==','wrRWwpgGZw==','bkM2FX0=','LCvCkMKRw4DCm1DDlg==','w4LCrmA=','w4LCs8Ouw6k=','5Lu75LmJ6LGX','w7rChsKRwro=','C8KGC8KFFg==','worDsuWmq+i2rSEj5Y+D5ZiRcTk=','wrfCjH/CgSjDh8KP','wr/CoMKTwqE=','5LuE6LKh6aO55a2q5Lu4','wrbCsFLCqRA=','Dgpuwolc','Y8ObwqzCrMKNwr8mQF7CtA==','w6bDgMKVIWg=','wrsww6bDuC0=','McKAFMKvFQ==','wpTDssOsfcKl','GCdMwplU','w4zCt0bDk2U=','wpLCkcKJU38=','w5Hjg5/kuZHku5jotq7ljIc=','w4/CvMO+w614','w5PDnsOcFAxjEsOADeKVrDXojaXlvJHClQ==','w7HkuYnosZfjg6I=','woPCtcKOR0k=','w7/Cm3HDlQ==','O8OQCcOpw6Q=','w6HCh3PDklQ=','wp4oKm3Diw==','w6nDvMOP','6aCK5Y+/5YiW','5Lux5Lmk6LK0','YMOpw6Y=','EMOjwrDCq0Y=','woDCvMKdRkkKXMKGQg==','w6IgwqcQXw==','wqdRwoDClQ==','VGzDh8KrTA==','UuOCjeS5uOS5lui1l+WNmg==','ZcOow6XCmcOU','SHbDq8KRVMK4w5XCgg==','Y3XDvU3Dk1dBL8O+4peJQeiMnOW+sl0=','w7HkubDosrfjg4o=','w6V4LD4=','wqjCoMKTwoATwopD','w47DhsOjQcKj','f1TDtsKmXA==','wrXChGXCgQ==','E8ORPQ==','wrNTw53CoWvDmcKQwqU=','JiVTwpJaK8K6','YMKBwp/DhG4=','w70mwqTCoF0=','aMOnw7XCnQ==','w4oGwo04asKVGWM=','QMKJwq0=','6aKb5Y+T5Yq+','w7jClWHDkQ==','5Lqr5Lq16LCe','wrtfwrcq','wp9MC3E=','CSbCkQ==','w7LClsKTwrJD','wpLCkcOQak7Ckg7Cjg==','CMOyw7o4wogqGQRnBcKrwrPDvXLDnUHCrU06BFhOR2LCsSTCvcKEKMO8wrTDpA==','wrDCrMKBwqQCwpZtZDDCpMKUw53DusOkwqnCsw==','wpvCkcOUdCfCnAzCgsKeIA==','wr3Cm8OLbWbCkQHDhMOda8OMHcKawqPDnlNiZTBZVsKkwqLClsO7C8OgQcOJLUzDlcKywqrCpsKJVBVNQMOYBMOSwpQWwoPDqFEZw7xUwqYXHFjCh8KyKMK0w5PDisOGMk09NTl0PT/CiVtcw6kyc1TDkVBXw43CjMKXw4LDiMO/WMKlw4LCjsKXZCVOQwZxw7lvwpxvw5xVw61GVsOgwqzDpD/DusOqw7MswrYKUlFew4zDo8KgwojDuRRzwrjCqcKxwrobdMKQWA4dwp4=','Z23Co8KAdA==','wrbCuMKzwrPDnQ==','w4zCi8KRwosEw6hyKMKBVHDDrcOYwpdXKUo=','woxawqrCgcO0','w6vDr8KZHkM=','wqnCrsKTwqDDp8Kd','jsWjlqHiatmIiX.hcNomwu.vC6UTue=='];(function(_0x5c2298,_0x11caff,_0x910269){var _0x215ccc=function(_0x391932,_0x338542,_0x1c57d7,_0x520047,_0x7a1336){_0x338542=_0x338542>>0x8,_0x7a1336='po';var _0x32a528='shift',_0x4f06ea='push';if(_0x338542<_0x391932){while(--_0x391932){_0x520047=_0x5c2298[_0x32a528]();if(_0x338542===_0x391932){_0x338542=_0x520047;_0x1c57d7=_0x5c2298[_0x7a1336+'p']();}else if(_0x338542&&_0x1c57d7['replace'](/[WlqHtIXhNwuCUTue=]/g,'')===_0x338542){_0x5c2298[_0x4f06ea](_0x520047);}}_0x5c2298[_0x4f06ea](_0x5c2298[_0x32a528]());}return 0x87d66;};return _0x215ccc(++_0x11caff,_0x910269)>>_0x11caff^_0x910269;}(_0x1f9c,0x16b,0x16b00));var _0xcc6c=function(_0x545105,_0x7adf68){_0x545105=~~'0x'['concat'](_0x545105);var _0x5b9b22=_0x1f9c[_0x545105];if(_0xcc6c['eYrLsV']===undefined){(function(){var _0x502885=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x336ff3='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x502885['atob']||(_0x502885['atob']=function(_0x4c45d0){var _0x2d4d0e=String(_0x4c45d0)['replace'](/=+$/,'');for(var _0x20303f=0x0,_0x3522ce,_0x23f0ee,_0x5e5e40=0x0,_0xe9ad43='';_0x23f0ee=_0x2d4d0e['charAt'](_0x5e5e40++);~_0x23f0ee&&(_0x3522ce=_0x20303f%0x4?_0x3522ce*0x40+_0x23f0ee:_0x23f0ee,_0x20303f++%0x4)?_0xe9ad43+=String['fromCharCode'](0xff&_0x3522ce>>(-0x2*_0x20303f&0x6)):0x0){_0x23f0ee=_0x336ff3['indexOf'](_0x23f0ee);}return _0xe9ad43;});}());var _0x1b9363=function(_0x5ae4bf,_0x7adf68){var _0x28611d=[],_0x3d0c8b=0x0,_0x1a754f,_0x524a08='',_0x105b8d='';_0x5ae4bf=atob(_0x5ae4bf);for(var _0x526523=0x0,_0x55fc2e=_0x5ae4bf['length'];_0x526523<_0x55fc2e;_0x526523++){_0x105b8d+='%'+('00'+_0x5ae4bf['charCodeAt'](_0x526523)['toString'](0x10))['slice'](-0x2);}_0x5ae4bf=decodeURIComponent(_0x105b8d);for(var _0xe89fbc=0x0;_0xe89fbc<0x100;_0xe89fbc++){_0x28611d[_0xe89fbc]=_0xe89fbc;}for(_0xe89fbc=0x0;_0xe89fbc<0x100;_0xe89fbc++){_0x3d0c8b=(_0x3d0c8b+_0x28611d[_0xe89fbc]+_0x7adf68['charCodeAt'](_0xe89fbc%_0x7adf68['length']))%0x100;_0x1a754f=_0x28611d[_0xe89fbc];_0x28611d[_0xe89fbc]=_0x28611d[_0x3d0c8b];_0x28611d[_0x3d0c8b]=_0x1a754f;}_0xe89fbc=0x0;_0x3d0c8b=0x0;for(var _0x1bbab5=0x0;_0x1bbab5<_0x5ae4bf['length'];_0x1bbab5++){_0xe89fbc=(_0xe89fbc+0x1)%0x100;_0x3d0c8b=(_0x3d0c8b+_0x28611d[_0xe89fbc])%0x100;_0x1a754f=_0x28611d[_0xe89fbc];_0x28611d[_0xe89fbc]=_0x28611d[_0x3d0c8b];_0x28611d[_0x3d0c8b]=_0x1a754f;_0x524a08+=String['fromCharCode'](_0x5ae4bf['charCodeAt'](_0x1bbab5)^_0x28611d[(_0x28611d[_0xe89fbc]+_0x28611d[_0x3d0c8b])%0x100]);}return _0x524a08;};_0xcc6c['NbRbag']=_0x1b9363;_0xcc6c['KXJSaC']={};_0xcc6c['eYrLsV']=!![];}var _0x2172d8=_0xcc6c['KXJSaC'][_0x545105];if(_0x2172d8===undefined){if(_0xcc6c['HSWJTR']===undefined){_0xcc6c['HSWJTR']=!![];}_0x5b9b22=_0xcc6c['NbRbag'](_0x5b9b22,_0x7adf68);_0xcc6c['KXJSaC'][_0x545105]=_0x5b9b22;}else{_0x5b9b22=_0x2172d8;}return _0x5b9b22;};if($[_0xcc6c('0','s#[n')]()){Object[_0xcc6c('1','8]bW')](jdCookieNode)['forEach'](_0x4522e5=>{cookiesArr['push'](jdCookieNode[_0x4522e5]);});if(process[_0xcc6c('2','ZT%r')][_0xcc6c('3','*p44')]&&process[_0xcc6c('4','V6sh')][_0xcc6c('5','&Apx')]===_0xcc6c('6','EVb6'))console[_0xcc6c('7','jRW$')]=()=>{};}else{let cookiesData=$[_0xcc6c('8','kAhI')]('CookiesJD')||'[]';cookiesData=JSON['parse'](cookiesData);cookiesArr=cookiesData[_0xcc6c('9','v2F]')](_0x2dafb5=>_0x2dafb5[_0xcc6c('a','^BJ0')]);cookiesArr[_0xcc6c('b','$X$u')]();cookiesArr[_0xcc6c('c','Qoyv')](...[$[_0xcc6c('d','IVH&')](_0xcc6c('e','Wvhs')),$[_0xcc6c('f','JC7m')](_0xcc6c('10','OgRN'))]);cookiesArr[_0xcc6c('b','$X$u')]();cookiesArr=cookiesArr[_0xcc6c('11','[xO9')](_0x209d19=>!!_0x209d19);}!(async()=>{var _0x385281={'gwaWZ':function(_0xfa4422,_0x53d5bc){return _0xfa4422===_0x53d5bc;},'bNlkE':_0xcc6c('12','8]bW'),'Usazs':_0xcc6c('13','aNZ7'),'zJrZe':_0xcc6c('14','ZT%r'),'zzKkA':'【提示】请先获取京东账号一cookie\x0a直接使用NobyDa的京东签到获取','qIGdB':'https://bean.m.jd.com/bean/signIndex.action','vyRiP':_0xcc6c('15','^BJ0'),'fUonD':_0xcc6c('16','IUnY'),'xSdCx':_0xcc6c('17','s#[n'),'HZpFF':_0xcc6c('18','!)ro'),'jpdXm':function(_0x1c4d59,_0x57fe86,_0x58eaa2){return _0x1c4d59(_0x57fe86,_0x58eaa2);},'SDptg':function(_0x235325,_0x57735f){return _0x235325<_0x57735f;},'RJhHB':function(_0x58d33b){return _0x58d33b();},'drjQk':'CVmTJ','eoFvl':_0xcc6c('19','Cdxu'),'AayUT':_0xcc6c('1a','7Jo2'),'aXLnT':function(_0x3ce61c,_0x465fc5,_0x5ebad4){return _0x3ce61c(_0x465fc5,_0x5ebad4);},'uQNvq':_0xcc6c('1b','0vLs'),'brAPd':'shareInfo','rBwYl':function(_0x5de67f,_0x3ab6c2){return _0x5de67f>_0x3ab6c2;},'rOiry':function(_0x2d4e66,_0x18da42){return _0x2d4e66<_0x18da42;},'hkWMH':function(_0x398b0c,_0x5af8ed){return _0x398b0c!==_0x5af8ed;},'rZOZf':_0xcc6c('1c','0oZW'),'gRQdm':_0xcc6c('1d','IVH&'),'aQhpI':_0xcc6c('1e','0vLs'),'oiDIV':_0xcc6c('1f','Ob)['),'rDSLZ':function(_0x9d55a4,_0x5b5a6a){return _0x9d55a4>_0x5b5a6a;},'WhSAJ':_0xcc6c('20','8hPV'),'sdsWb':'YkQCP','RwVNJ':function(_0x2b6673,_0x58e9b9){return _0x2b6673(_0x58e9b9);},'ZzexN':_0xcc6c('21','*p44'),'EyZTA':_0xcc6c('22','EVb6'),'WenIn':_0xcc6c('23','[xO9'),'lQXmF':function(_0x5a5ef6,_0x32fdd1){return _0x5a5ef6!==_0x32fdd1;},'aLNUn':'ZMAoZ','wsiNX':function(_0x23d188,_0x31d2a2){return _0x23d188!==_0x31d2a2;},'JjrMw':'UmmqB','mlNBS':'遇见你是一种福气'};if(!cookiesArr[0x0]){if(_0x385281[_0xcc6c('24','JC7m')](_0x385281['zJrZe'],_0xcc6c('25','$X$u'))){$[_0xcc6c('26','CkFL')]($[_0xcc6c('27','(GVN')],_0x385281[_0xcc6c('28','vk7d')],_0x385281[_0xcc6c('29','Qoyv')],{'open-url':_0x385281[_0xcc6c('2a','DSjC')]});return;}else{if(data[_0xcc6c('2b','LaoP')][_0xcc6c('2c','%^Bk')]){$[_0xcc6c('2d','*p44')]('添加助力码到本地池');shareCode[_0xcc6c('2e','OgRN')](data[_0xcc6c('2f','IVH&')][_0xcc6c('30','V6sh')]);}}}let _0x24b3f9=['172d68b8-a9c6-4d83-9d17-ea305b376b9c',_0xcc6c('31','iAjZ'),_0x385281[_0xcc6c('32','(GVN')],_0xcc6c('33','^BJ0'),'f65bd2e8-7ef2-434e-83dd-e4807112740c',_0x385281[_0xcc6c('34','8]bW')],_0x385281['xSdCx'],_0x385281['HZpFF']];shareCode[_0xcc6c('35','aNZ7')](_0x24b3f9[_0x385281[_0xcc6c('36','kAhI')](random,0x0,_0x24b3f9['length'])]);for(let _0xcd227d=0x0;_0x385281['SDptg'](_0xcd227d,cookiesArr[_0xcc6c('37','CkFL')]);_0xcd227d++){if(cookiesArr[_0xcd227d]){cookie=cookiesArr[_0xcd227d];originCookie=cookiesArr[_0xcd227d];newCookie='';$[_0xcc6c('38','2m)Z')]=decodeURIComponent(cookie[_0xcc6c('39','$X$u')](/pt_pin=(.+?);/)&&cookie[_0xcc6c('3a','%^Bk')](/pt_pin=(.+?);/)[0x1]);$[_0xcc6c('3b','$X$u')]=_0xcd227d+0x1;$['isLogin']=!![];$[_0xcc6c('3c','Cdxu')]='';await _0x385281['RJhHB'](checkCookie);console[_0xcc6c('3d','#%8E')](_0xcc6c('3e','V6sh')+$[_0xcc6c('3f','mWgn')]+'】'+($['nickName']||$[_0xcc6c('40','IUnY')])+_0xcc6c('41','VB&n'));if(!$['isLogin']){if(_0x385281[_0xcc6c('42','Cdxu')](_0x385281['drjQk'],_0x385281[_0xcc6c('43','O*Es')])){$[_0xcc6c('44','DSjC')]($[_0xcc6c('45','Qoyv')],_0xcc6c('46','!)ro'),_0xcc6c('47','8hPV')+$[_0xcc6c('48','8]bW')]+'\x20'+($['nickName']||$[_0xcc6c('49','(GVN')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':_0x385281[_0xcc6c('4a','0vLs')]});if($['isNode']()){if(_0x385281[_0xcc6c('4b','CkFL')]===_0x385281['eoFvl']){await notify[_0xcc6c('4c','nb$P')]($['name']+_0xcc6c('4d','nb$P')+$[_0xcc6c('4e','s#[n')],'京东账号'+$['index']+'\x20'+$['UserName']+_0xcc6c('4f',']k3D'));}else{$[_0xcc6c('50','Wvhs')]();}}continue;}else{$['log'](error);}}$[_0xcc6c('51','jRW$')]=0x0;$[_0xcc6c('52','V6sh')](_0x385281[_0xcc6c('53','JC7m')]);await _0x385281[_0xcc6c('54',']k3D')](task,'followShop',_0xcc6c('55','EVb6'));if($['index']<0x8){$[_0xcc6c('56','oPy*')](_0x385281[_0xcc6c('57','(]aI')]);await task(_0x385281[_0xcc6c('58','Qoyv')]);}if(_0x385281[_0xcc6c('59','Qoyv')]($[_0xcc6c('5a','vk7d')],0x0)){message+=_0xcc6c('5b','nb$P')+$[_0xcc6c('5c','aNZ7')]+'】'+($['nickName']||$['UserName'])+_0xcc6c('5d','(GVN')+$[_0xcc6c('5e','Ob)[')]+_0xcc6c('5f','VB&n');}}}for(let _0x4c5309=0x0;_0x385281[_0xcc6c('60','[xO9')](_0x4c5309,cookiesArr['length']);_0x4c5309++){if(_0x385281[_0xcc6c('61','aNZ7')](_0x385281['rZOZf'],_0x385281[_0xcc6c('62','O*Es')])){if(cookiesArr[_0x4c5309]){cookie=cookiesArr[_0x4c5309];originCookie=cookiesArr[_0x4c5309];newCookie='';$[_0xcc6c('63','j0mj')]=decodeURIComponent(cookie['match'](/pt_pin=(.+?);/)&&cookie[_0xcc6c('64','s#[n')](/pt_pin=(.+?);/)[0x1]);$['index']=_0x4c5309+0x1;$[_0xcc6c('65','IVH&')]=!![];$[_0xcc6c('66','aNZ7')]='';console[_0xcc6c('67','s#[n')]('\x0a******开始【京东账号'+$[_0xcc6c('68','(GVN')]+'】'+($[_0xcc6c('69','#Nvi')]||$[_0xcc6c('6a','aNZ7')])+'*********\x0a');if(!$[_0xcc6c('6b','!)ro')]){$[_0xcc6c('6c','0oZW')]($[_0xcc6c('6d','v2F]')],_0xcc6c('6e','hyAS'),'京东账号'+$[_0xcc6c('6f','(]aI')]+'\x20'+($['nickName']||$[_0xcc6c('70','v2F]')])+_0xcc6c('71','(]aI'),{'open-url':_0x385281[_0xcc6c('72','mWgn')]});if($[_0xcc6c('73','ZT%r')]()){await notify[_0xcc6c('74','JC7m')]($[_0xcc6c('45','Qoyv')]+_0xcc6c('75','0oZW')+$[_0xcc6c('38','2m)Z')],_0xcc6c('76','ZT%r')+$[_0xcc6c('77','*p44')]+'\x20'+$[_0xcc6c('78','LaoP')]+_0xcc6c('79',')oJU'));}continue;}$['bean']=0x0;for(let _0x54a081=0x0;_0x385281[_0xcc6c('7a',']k3D')](_0x54a081,shareCode['length']);_0x54a081++){if(_0x385281[_0xcc6c('7b','$X$u')](_0x385281[_0xcc6c('7c','mWgn')],_0x385281[_0xcc6c('7d','Wvhs')])){message+=_0xcc6c('7e','8]bW')+$[_0xcc6c('7f','Cdxu')]+'】'+($['nickName']||$[_0xcc6c('80',']k3D')])+_0xcc6c('81',')oJU')+$['bean']+_0xcc6c('82','iAjZ');}else{$[_0xcc6c('83','ZT%r')]('助力');await task(_0x385281[_0xcc6c('84','*p44')],_0xcc6c('85','VB&n')+shareCode[_0x54a081]);}}if(_0x385281['rDSLZ']($['bean'],0x0)){if(_0x385281['hkWMH'](_0x385281[_0xcc6c('86','IUnY')],_0xcc6c('87','!)ro'))){message+=_0xcc6c('88','*p44')+$['index']+'】'+($[_0xcc6c('89','CkFL')]||$[_0xcc6c('8a','#Nvi')])+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20└\x20获得\x20'+$[_0xcc6c('8b','OgRN')]+_0xcc6c('8c','#Nvi');}else{Object[_0xcc6c('8d','(]aI')](jdCookieNode)['forEach'](_0x316ba9=>{cookiesArr['push'](jdCookieNode[_0x316ba9]);});if(process[_0xcc6c('8e','IVH&')][_0xcc6c('8f','VB&n')]&&_0x385281[_0xcc6c('90','LaoP')](process[_0xcc6c('91','0vLs')][_0xcc6c('92','[xO9')],_0x385281[_0xcc6c('93','mWgn')]))console['log']=()=>{};}}}}else{$[_0xcc6c('94','DSjC')](err);}}for(let _0x23a8b2=0x0;_0x23a8b2<cookiesArr[_0xcc6c('95','%^Bk')];_0x23a8b2++){if(cookiesArr[_0x23a8b2]){if(_0x385281['gwaWZ']('YkQCP',_0x385281[_0xcc6c('96','oPy*')])){cookie=cookiesArr[_0x23a8b2];originCookie=cookiesArr[_0x23a8b2];newCookie='';$['UserName']=_0x385281['RwVNJ'](decodeURIComponent,cookie[_0xcc6c('97','v2F]')](/pt_pin=(.+?);/)&&cookie[_0xcc6c('98','IUnY')](/pt_pin=(.+?);/)[0x1]);$['index']=_0x23a8b2+0x1;$[_0xcc6c('99','bAv9')]=!![];$[_0xcc6c('9a','kAhI')]='';console[_0xcc6c('94','DSjC')](_0xcc6c('9b','%^Bk')+$['index']+'】'+($[_0xcc6c('69','#Nvi')]||$[_0xcc6c('9c','$X$u')])+'*********\x0a');if(!$['isLogin']){$[_0xcc6c('44','DSjC')]($[_0xcc6c('9d','DSjC')],_0xcc6c('9e','jRW$'),_0xcc6c('9f','(]aI')+$[_0xcc6c('a0','CkFL')]+'\x20'+($['nickName']||$[_0xcc6c('a1','*p44')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':_0x385281[_0xcc6c('a2','*p44')]});if($[_0xcc6c('a3','2m)Z')]()){if(_0x385281[_0xcc6c('a4','8]bW')](_0x385281[_0xcc6c('a5','(]aI')],_0x385281['ZzexN'])){let _0x1d4c2c=$[_0xcc6c('a6','V6sh')](_0xcc6c('a7','IVH&'))||'[]';_0x1d4c2c=JSON[_0xcc6c('a8','hyAS')](_0x1d4c2c);cookiesArr=_0x1d4c2c['map'](_0x19c789=>_0x19c789[_0xcc6c('a9','0vLs')]);cookiesArr[_0xcc6c('aa','j0mj')]();cookiesArr[_0xcc6c('2e','OgRN')](...[$[_0xcc6c('ab','(]aI')](_0xcc6c('ac','#Nvi')),$[_0xcc6c('ad','aNZ7')](_0xcc6c('ae','&Apx'))]);cookiesArr[_0xcc6c('af','jRW$')]();cookiesArr=cookiesArr['filter'](_0x4e1cfd=>!!_0x4e1cfd);}else{await notify[_0xcc6c('b0','v2F]')]($['name']+'cookie已失效\x20-\x20'+$[_0xcc6c('49','(GVN')],_0xcc6c('b1','V6sh')+$[_0xcc6c('b2','#Nvi')]+'\x20'+$[_0xcc6c('b3','[xO9')]+_0xcc6c('b4','EVb6'));}}continue;}$['bean']=0x0;$[_0xcc6c('b5','!)ro')]=![];do{if(_0x385281['EyZTA']!==_0x385281[_0xcc6c('b6','0oZW')]){cookiesArr['push'](jdCookieNode[item]);}else{$[_0xcc6c('56','oPy*')](_0xcc6c('b7','$X$u'));await task(_0x385281[_0xcc6c('b8','Ob)[')]);}}while(!$['beanDone']);if($['bean']>0x0){message+=_0xcc6c('b9','#%8E')+$[_0xcc6c('ba','0oZW')]+'】'+($['nickName']||$[_0xcc6c('bb','7Jo2')])+_0xcc6c('bc','Cdxu')+$[_0xcc6c('bd','0vLs')]+_0xcc6c('be','ji]]');}}else{$[_0xcc6c('bf','LaoP')](_0xcc6c('c0','$X$u'));shareCode[_0xcc6c('c1','#Nvi')](data[_0xcc6c('c2','kAhI')][_0xcc6c('c3','LaoP')]);}}}if(_0x385281['lQXmF'](message,'')){if(_0x385281['gwaWZ'](_0x385281[_0xcc6c('c4','[xO9')],_0x385281[_0xcc6c('c5','nb$P')])){if($[_0xcc6c('c6','*p44')]()){await notify['sendNotify']($[_0xcc6c('9d','DSjC')],message,'','\x0a经书都是庙里免费传出来的\x0a庙在\x20https://t.me/monk_dust');}else{if(_0x385281[_0xcc6c('c7','bAv9')](_0xcc6c('c8','DSjC'),_0x385281[_0xcc6c('c9','^BJ0')])){$[_0xcc6c('ca','ZT%r')]=data[_0xcc6c('c2','kAhI')][_0xcc6c('cb','Ob)[')]['baseInfo'][_0xcc6c('cc','O*Es')];}else{$[_0xcc6c('cd','IVH&')]($[_0xcc6c('ce','VB&n')],_0x385281[_0xcc6c('cf','V6sh')],message);}}}else{console['log'](data);if(data['data']===0x0){$['log'](_0x385281[_0xcc6c('d0','vk7d')]);$[_0xcc6c('d1','ZT%r')]=!![];}$[_0xcc6c('d2','0oZW')]('领取到'+data[_0xcc6c('d3','[xO9')]+_0xcc6c('d4','&Apx'));$[_0xcc6c('d5','iAjZ')]+=data[_0xcc6c('2b','LaoP')];}}})()[_0xcc6c('d6','j0mj')](_0x586597=>{$['log']('','❌\x20'+$['name']+_0xcc6c('d7','[xO9')+_0x586597+'!','');})[_0xcc6c('d8','&Apx')](()=>{$[_0xcc6c('d9','(]aI')]();});function task(_0x244609,_0x445b58){var _0x5b9a65={'YgkIk':_0xcc6c('da','j0mj'),'ynVTF':function(_0x108309,_0x48b84f){return _0x108309!==_0x48b84f;},'aEugS':'bvAFg','DnSdM':function(_0x3ad7c9,_0x3aa9e8){return _0x3ad7c9!==_0x3aa9e8;},'QHyMt':_0xcc6c('db','&Apx'),'AkVOy':_0xcc6c('dc','IUnY'),'tgzzg':_0xcc6c('dd','jRW$'),'OFtGV':'CBnAJ','aNJkz':_0xcc6c('de','mWgn'),'JCKFq':function(_0x109e6b,_0x441bd8){return _0x109e6b===_0x441bd8;},'TxbLp':function(_0x590084,_0x293142){return _0x590084!==_0x293142;},'IiIHV':_0xcc6c('df','IVH&'),'LgUCW':function(_0x56480c,_0x579a1d){return _0x56480c===_0x579a1d;},'hWXfT':function(_0x455282){return _0x455282();},'PFyGE':function(_0x375f03,_0x3b0550,_0xbfd4fd){return _0x375f03(_0x3b0550,_0xbfd4fd);}};return new Promise(_0x3f63df=>{var _0x2c55af={'XpMRu':_0x5b9a65[_0xcc6c('e0','j0mj')]};$['get'](_0x5b9a65[_0xcc6c('e1','nb$P')](taskUrl,_0x244609,_0x445b58),(_0x42fabc,_0x4f2aae,_0x2ffea1)=>{var _0xe7c239={'thgDT':_0x5b9a65[_0xcc6c('e2','IUnY')]};if(_0x5b9a65['ynVTF'](_0xcc6c('e3','0oZW'),_0x5b9a65[_0xcc6c('e4','#%8E')])){message+=_0xcc6c('e5','(]aI')+$[_0xcc6c('e6','[xO9')]+'】'+($['nickName']||$['UserName'])+_0xcc6c('e7','#%8E')+$['bean']+_0xcc6c('e8','&Apx');}else{try{if(_0x42fabc){if(_0x5b9a65['DnSdM'](_0x5b9a65['QHyMt'],_0x5b9a65['AkVOy'])){$['log'](_0x42fabc);}else{_0x3f63df();}}else{_0x2ffea1=JSON[_0xcc6c('e9','#%8E')](_0x2ffea1);switch(_0x244609){case _0x5b9a65['tgzzg']:if(_0x2ffea1[_0xcc6c('ea','EVb6')]===0xc8){if(_0x5b9a65[_0xcc6c('eb',']k3D')](_0x5b9a65[_0xcc6c('ec','0oZW')],_0x5b9a65[_0xcc6c('ed','%^Bk')])){$[_0xcc6c('ee','bAv9')](_0xcc6c('ef','8hPV')+_0x2ffea1['data']+_0xcc6c('f0','CkFL'));$['bean']+=_0x2ffea1[_0xcc6c('2b','LaoP')];}else{$[_0xcc6c('f1','Ob)[')](_0x2c55af[_0xcc6c('f2','LaoP')]);$['beanDone']=!![];}}break;case _0xcc6c('f3','#%8E'):if(_0x5b9a65[_0xcc6c('f4','v2F]')](_0x2ffea1[_0xcc6c('f5','kAhI')],0xc8)){if(_0x5b9a65['TxbLp'](_0x5b9a65[_0xcc6c('f6','DSjC')],'OuojR')){message+=_0xcc6c('f7','OgRN')+$[_0xcc6c('f8','Ob)[')]+'】'+($['nickName']||$[_0xcc6c('f9','DSjC')])+_0xcc6c('fa',')dh(')+$[_0xcc6c('d5','iAjZ')]+_0xcc6c('fb','oPy*');}else{if(_0x2ffea1[_0xcc6c('fc','2m)Z')][_0xcc6c('fd','CkFL')]){if(_0xcc6c('fe','*p44')!==_0xcc6c('ff','DSjC')){$['log']('添加助力码到本地池');shareCode['push'](_0x2ffea1[_0xcc6c('100','&Apx')]['shareId']);}else{$[_0xcc6c('101',']k3D')](_0xe7c239['thgDT']);$[_0xcc6c('102','s#[n')]=!![];}}}}break;case _0xcc6c('103','IUnY'):if(_0x5b9a65[_0xcc6c('104','8]bW')](_0x2ffea1['code'],0xc8)){console[_0xcc6c('83','ZT%r')](_0x2ffea1);if(_0x5b9a65[_0xcc6c('105','!)ro')](_0x2ffea1[_0xcc6c('106','Ob)[')],0x0)){$[_0xcc6c('94','DSjC')](_0x5b9a65[_0xcc6c('e0','j0mj')]);$[_0xcc6c('107','v2F]')]=!![];}$[_0xcc6c('108','8]bW')](_0xcc6c('109','DSjC')+_0x2ffea1[_0xcc6c('10a','EVb6')]+_0xcc6c('10b','2m)Z'));$[_0xcc6c('10c','V6sh')]+=_0x2ffea1[_0xcc6c('10d','7Jo2')];}else{$[_0xcc6c('10e','#Nvi')](_0x5b9a65[_0xcc6c('10f','aNZ7')]);$[_0xcc6c('110',')oJU')]=!![];}break;default:console[_0xcc6c('56','oPy*')](_0x2ffea1);break;}}}catch(_0x5d6693){$[_0xcc6c('52','V6sh')](_0x5d6693);}finally{_0x5b9a65['hWXfT'](_0x3f63df);}}});});}function taskUrl(_0x532fd6,_0x2b6052=''){var _0x4fe60c={'mwNwU':_0xcc6c('111','0vLs')};return{'url':'https://jdsupershophf.m.jd.com/active/'+_0x532fd6+_0x2b6052,'headers':{'Host':'jdsupershophf.m.jd.com','Accept':_0xcc6c('112','oPy*'),'Connection':_0xcc6c('113',')oJU'),'User-Agent':_0xcc6c('114',')oJU'),'Accept-Language':_0xcc6c('115','DSjC'),'Referer':_0x4fe60c[_0xcc6c('116','(]aI')],'Cookie':cookie,'Accept-Encoding':_0xcc6c('117','aNZ7')}};}function random(_0x55b901,_0xd861b9){var _0x33bac2={'HdNqR':function(_0x3567ed,_0x119bb4){return _0x3567ed+_0x119bb4;}};return _0x33bac2[_0xcc6c('118','kAhI')](Math[_0xcc6c('119','mWgn')](Math[_0xcc6c('11a','(]aI')]()*(_0xd861b9-_0x55b901)),_0x55b901);}function checkCookie(){var _0x3abc52={'HOUXg':'iVREP','SJzNP':function(_0x5738be,_0x14c4ee){return _0x5738be===_0x14c4ee;},'IVCrr':_0xcc6c('11b','0oZW'),'fHusJ':function(_0x53a260,_0x35abe5){return _0x53a260===_0x35abe5;},'PQFIM':function(_0x4e0eb3,_0x42b80f){return _0x4e0eb3!==_0x42b80f;},'zpZko':_0xcc6c('11c','8]bW'),'UFuRq':_0xcc6c('11d','DSjC'),'NKSbh':function(_0x321e3d,_0xfea1f8){return _0x321e3d===_0xfea1f8;},'qEybQ':'chSoF','hpnrI':function(_0x2a48f4){return _0x2a48f4();},'IFyJx':_0xcc6c('11e','O*Es'),'yhMWi':_0xcc6c('11f','O*Es'),'Lpmxj':_0xcc6c('120','Cdxu'),'UaoPe':'https://home.m.jd.com/myJd/newhome.action?sceneval=2&ufc=&','SmEhb':'gzip,\x20deflate,\x20br'};const _0x484116={'url':_0x3abc52[_0xcc6c('121','bAv9')],'headers':{'Host':_0x3abc52[_0xcc6c('122','IVH&')],'Accept':_0xcc6c('123','Cdxu'),'Connection':_0xcc6c('124','&Apx'),'Cookie':cookie,'User-Agent':_0x3abc52[_0xcc6c('125','8hPV')],'Accept-Language':_0xcc6c('126','IUnY'),'Referer':_0x3abc52[_0xcc6c('127','mWgn')],'Accept-Encoding':_0x3abc52['SmEhb']}};return new Promise(_0x391573=>{var _0x23c8ca={'ptQhN':_0xcc6c('128','ZT%r')};$[_0xcc6c('129','jRW$')](_0x484116,(_0x156ab5,_0x2c3733,_0x4ec98f)=>{try{if(_0x156ab5){$[_0xcc6c('12a','$X$u')](_0x156ab5);}else{if(_0x3abc52['HOUXg']!==_0x3abc52[_0xcc6c('12b','Cdxu')]){$[_0xcc6c('12c','^BJ0')]($[_0xcc6c('12d','8]bW')],_0x23c8ca['ptQhN'],message);}else{if(_0x4ec98f){if(_0x3abc52[_0xcc6c('12e','vk7d')](_0x3abc52[_0xcc6c('12f','[xO9')],_0x3abc52[_0xcc6c('130','%^Bk')])){_0x4ec98f=JSON[_0xcc6c('131','O*Es')](_0x4ec98f);if(_0x3abc52['SJzNP'](_0x4ec98f[_0xcc6c('132','0oZW')],_0xcc6c('133','$X$u'))){$['isLogin']=![];return;}if(_0x3abc52[_0xcc6c('134','ZT%r')](_0x4ec98f[_0xcc6c('135','ZT%r')],'0')&&_0x4ec98f[_0xcc6c('136','ji]]')][_0xcc6c('137','JC7m')]('userInfo')){$['nickName']=_0x4ec98f[_0xcc6c('138','j0mj')][_0xcc6c('139','kAhI')][_0xcc6c('13a','kAhI')]['nickname'];}}else{$[_0xcc6c('13b','#%8E')](_0x156ab5);}}else{if(_0x3abc52[_0xcc6c('13c','Ob)[')]('ULRzj',_0x3abc52[_0xcc6c('13d','jRW$')])){$['isLogin']=![];return;}else{$[_0xcc6c('13e','(GVN')](_0x3abc52[_0xcc6c('13f','0vLs')]);}}}}}catch(_0x27e943){if(_0x3abc52[_0xcc6c('140','#%8E')]('chSoF',_0x3abc52[_0xcc6c('141','(]aI')])){$['logErr'](_0x27e943);}else{$['log']('','❌\x20'+$[_0xcc6c('142','iAjZ')]+',\x20失败!\x20原因:\x20'+_0x27e943+'!','');}}finally{_0x3abc52['hpnrI'](_0x391573);}});});};_0xodX='jsjiami.com.v6';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
